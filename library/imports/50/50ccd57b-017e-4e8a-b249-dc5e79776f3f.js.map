{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\EnemyRunner.js"],"names":["cc","Class","extends","Component","properties","laser","default","type","Node","onLoad","sideMargin","canvas","director","getScene","getChildByName","game","getComponent","maxPosX","width","minPosX","points","minPosY","speedX","speedY","downStep","goingDown","lastShot","waitMssTimePerShot","init","direction","onCollisionEnter","other","self","enemyDown","node","destroy","shoot","instantiate","tempPos","position","y","active","zIndex","setSpeed","addChild","update","dt","shootingAllowed","Date","now","newPosY","goingDownStart","setPositionY","newPosX","x","setPositionX"],"mappings":"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","file":"unknown","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n      laser: {\r\n          default: null,\r\n          type: cc.Node\r\n      },\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n      this.sideMargin = 60;\r\n      this.canvas = cc.director.getScene().getChildByName('Canvas');\r\n      this.game = this.canvas.getComponent(\"Game\");\r\n      this.maxPosX = this.canvas.width/2 - this.sideMargin;\r\n      this.minPosX = -this.canvas.width/2 + this.sideMargin;\r\n      this.points = 40;\r\n      this.minPosY = -100;\r\n      this.speedX = -5;\r\n      this.speedY = 1;\r\n      this.downStep = 100;\r\n      this.goingDown = false;\r\n      this.lastShot = null;\r\n      this.waitMssTimePerShot = 5000;\r\n    },\r\n\r\n    init: function(direction, minPosY,waitMssTimePerShot)\r\n    {\r\n      this.speedX *= direction;\r\n      this.minPosY += minPosY;\r\n      this.waitMssTimePerShot -= waitMssTimePerShot;\r\n    },\r\n\r\n    onCollisionEnter: function (other, self)\r\n    {\r\n      this.game.enemyDown({\"type\":\"runner\",\"points\":this.points});\r\n      this.node.destroy();\r\n    },\r\n\r\n    shoot: function ()\r\n    {\r\n      var laser = cc.instantiate(this.laser);\r\n      var tempPos = this.node.position;\r\n      tempPos.y -= 50;\r\n      laser.position = tempPos;\r\n      laser.active = true;\r\n      laser.zIndex = 1;\r\n      laser.getComponent(\"EnemyLaser\").setSpeed(180);\r\n      this.canvas.addChild(laser);\r\n      return true;\r\n    },\r\n\r\n    update: function (dt) {\r\n      // TO-DO\r\n      if (this.shootingAllowed && (Date.now() - this.lastShot) > this.waitMssTimePerShot)\r\n      {\r\n        this.shootingAllowed = false;\r\n        this.lastShot = Date.now();\r\n        this.shoot();\r\n      }\r\n\r\n      if (this.goingDown)\r\n      {\r\n        var newPosY = this.node.position.y - this.speedY;\r\n        if ((newPosY > this.minPosY) && (this.goingDownStart - newPosY < this.downStep))\r\n        {\r\n          this.node.setPositionY(newPosY)\r\n        }\r\n        else\r\n        {\r\n          if (newPosY <= this.minPosY)\r\n          {\r\n            // TO-DO increase shooting\r\n            this.shootingAllowed = true;\r\n          }\r\n          this.goingDown = false;\r\n        }\r\n      }\r\n\r\n      var newPosX = this.node.position.x + this.speedX;\r\n      if (this.speedX > 0 && (newPosX > this.maxPosX) || (newPosX < this.minPosX) && this.speedX < 0)\r\n      {\r\n        this.goingDownStart = this.node.position.y;\r\n        this.goingDown = true;\r\n        this.speedX *=-1;\r\n      }\r\n      else\r\n      {\r\n        this.node.setPositionX(newPosX);\r\n      }\r\n    },\r\n\r\n\r\n});\r\n"]}